LOAD "testlib.lgo

TO SCRUNCHTEST

   LOCALMAKE "oldscrunch SCRUNCH

   SETSCRUNCH 1 1
   SIMPLEREPORTTEST [SCRUNCH] [1 1]

   SETSCRUNCH 2 0.1
   CIRCLE 100
   SIMPLEREPORTTEST [SCRUNCH] [2 0.1]

   RUNNOTENOUGHINPUTSTEST [(SETSCRUNCH)       ]
   RUNNOTENOUGHINPUTSTEST [(SETSCRUNCH [1 1]) ]
   RUNNOTENOUGHINPUTSTEST [(SETSCRUNCH 1)     ]
   RUNBADINPUTTEST        [(SETSCRUNCH "a  1) ]
   RUNBADINPUTTEST        [(SETSCRUNCH [1] 1) ]
   RUNBADINPUTTEST        [(SETSCRUNCH {1} 1) ]
   RUNBADINPUTTEST        [(SETSCRUNCH 1  "a )]
   RUNBADINPUTTEST        [(SETSCRUNCH 1  [1])]
   RUNBADINPUTTEST        [(SETSCRUNCH 1  {1})]
   RUNTOOMANYINPUTSTEST   [(SETSCRUNCH 1 1 1) ]

   RUNTOOMANYINPUTSTEST [(SCRUNCH "toomany)]

   ; try to flush out some divide by zero bugs
   SETSCRUNCH 0 0
   SIMPLEREPORTTEST [SCRUNCH] [0 0]
   FORWARD 100
   RIGHT   45
   FORWARD 100
   CIRCLE  100

   ; try to flush out some divide by zero bugs
   SETSCRUNCH 1e50 -1e50
   SIMPLEREPORTTEST [SCRUNCH] [1e50 -1e50]
   FORWARD 100
   RIGHT   45
   FORWARD 100
   CIRCLE  100

   ; undo side-effects
   CLEARSCREEN
   SETSCRUNCH (ITEM 1 :oldscrunch) (ITEM 2 :oldscrunch)

END
